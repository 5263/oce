//
//  OCGraphicDevice.m
//  OpenCascade
//
//  Created by Emmanuel Valentin on 27/01/09.
//  Copyright 2009 Smooth Softs. All rights reserved.
//

#import <OCGraphicDevice.h>
#import <OSX_GraphicDevice.hxx>

static OCGraphicDevice *sharedInstance;


@implementation OCGraphicDevice

//--------------------------------------------------------------------------------------------------------------------------------
//
//--------------------------------------------------------------------------------------------------------------------------------

+ (OCGraphicDevice*)	defaultDevice {
	@synchronized(self) {
		if (sharedInstance == nil) {
			[[self alloc] init];
		}
	}
	return sharedInstance;
}

//--------------------------------------------------------------------------------------------------------------------------------
//
//--------------------------------------------------------------------------------------------------------------------------------
+ (id)	allocWithZone: (NSZone*) zone {
	@synchronized(self) {
		if (sharedInstance == nil) {
			sharedInstance = [ super allocWithZone: zone];
			return sharedInstance;
		}
	}
	return nil;
}

- (id) init  {
	self = [super init];
	if (self != nil) {
	}
	return self;
}

//--------------------------------------------------------------------------------------------------------------------------------
//
//--------------------------------------------------------------------------------------------------------------------------------
- (id)	copyWithZone:(NSZone *)zone {
    return self;
}

//--------------------------------------------------------------------------------------------------------------------------------
//
//--------------------------------------------------------------------------------------------------------------------------------
- (id)	retain {
    return self;
}

//--------------------------------------------------------------------------------------------------------------------------------
//
//--------------------------------------------------------------------------------------------------------------------------------
- (unsigned)	retainCount {
    return UINT_MAX;  //denotes an object that cannot be released
}

//--------------------------------------------------------------------------------------------------------------------------------
//
//--------------------------------------------------------------------------------------------------------------------------------
- (void)	release {
    //do nothing
}

//--------------------------------------------------------------------------------------------------------------------------------
//
//--------------------------------------------------------------------------------------------------------------------------------
- (id)	autorelease {
    return self;
}


//--------------------------------------------------------------------------------------------------------------------------------
//
//--------------------------------------------------------------------------------------------------------------------------------
-(const Handle_OSX_GraphicDevice&)		graphicDevice {
	if (graphicDevice.IsNull()) {
		graphicDevice = new OSX_GraphicDevice();
	}
	return graphicDevice;
}

@end
